<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Security Headers are handled by Cloudflare Worker for HTTP headers -->
    <!-- Note: X-Frame-Options meta tag is not supported by browsers, must be HTTP header -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timezone Converter - 1Page Tools</title>
    <link rel="stylesheet" href="../css/theme.css">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3527668902044321"
            crossorigin="anonymous"></script>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon-16x16.png">
    <link rel="manifest" href="../assets/images/site.webmanifest">
</head>
<body>
    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode">
        <i class="material-icons theme-toggle-icon">dark_mode</i>
        <span class="theme-toggle-text">Dark</span>
    </button>


    <a href="../index.html" class="back-button" title="Back to Home"></a>
    
    
    <div class="page-wrapper">
        <!-- Left Sidebar -->
        <div class="sidebar">
            <div class="ad-container vertical">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-3527668902044321"
                     data-ad-slot="6215837441"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="container">
            <div class="header-logo">
        <img src="../../assets/images/1page-logo.png" alt="1Page Tools Logo" class="site-logo">
    </div>
    <header>
            <h1>Timezone Converter</h1>
            <p class="subtitle">Convert time between different timezones around the world</p>
        </header>
        
        <div class="instructions">
            <p>Select a date and time, then convert it to different timezones instantly.</p>
        </div>
        
        <div class="timezone-container">
            <div class="conversion-section">
                <div class="input-group">
                    <label for="dateInput">Date & Time:</label>
                    <input type="datetime-local" id="dateInput" onchange="convertTimezones()">
                    <button class="btn btn-secondary" onclick="useCurrentTime()">Use Current Time</button>
                </div>
                
                <div class="input-group">
                    <label for="fromTimezone">From Timezone:</label>
                    <select id="fromTimezone" onchange="convertTimezones()">
                        <option value="UTC">UTC (Coordinated Universal Time)</option>
                        <option value="America/New_York">New York (EST/EDT)</option>
                        <option value="America/Los_Angeles">Los Angeles (PST/PDT)</option>
                        <option value="America/Chicago">Chicago (CST/CDT)</option>
                        <option value="America/Denver">Denver (MST/MDT)</option>
                        <option value="Europe/London">London (GMT/BST)</option>
                        <option value="Europe/Paris">Paris (CET/CEST)</option>
                        <option value="Europe/Berlin">Berlin (CET/CEST)</option>
                        <option value="Europe/Rome">Rome (CET/CEST)</option>
                        <option value="Europe/Madrid">Madrid (CET/CEST)</option>
                        <option value="Asia/Tokyo">Tokyo (JST)</option>
                        <option value="Asia/Shanghai">Shanghai (CST)</option>
                        <option value="Asia/Kolkata">Mumbai/Delhi (IST)</option>
                        <option value="Asia/Dubai">Dubai (GST)</option>
                        <option value="Asia/Singapore">Singapore (SGT)</option>
                        <option value="Australia/Sydney">Sydney (AEST/AEDT)</option>
                        <option value="Australia/Melbourne">Melbourne (AEST/AEDT)</option>
                        <option value="Pacific/Auckland">Auckland (NZST/NZDT)</option>
                    </select>
                </div>
            </div>
            
            <div class="results-section">
                <h3>Converted Times</h3>
                <div class="timezone-results" id="timezoneResults">
                    <p>Select a date and time to see conversions</p>
                </div>
                <button class="btn btn-secondary" id="copyAllBtn" onclick="copyAllResults()" disabled>Copy All Times</button>
            </div>
            
            <div class="world-clock-section">
                <h3>World Clock</h3>
                <div class="world-clock-grid" id="worldClockGrid">
                    <!-- World clock will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="info-section">
                <h3>Timezone Information</h3>
                <div class="info-grid">
                    <div class="info-card">
                        <strong>UTC</strong>
                        <p>Coordinated Universal Time - the primary time standard by which the world regulates clocks and time.</p>
                    </div>
                    <div class="info-card">
                        <strong>DST</strong>
                        <p>Daylight Saving Time - the practice of advancing clocks during warmer months to extend evening daylight.</p>
                    </div>
                    <div class="info-card">
                        <strong>GMT</strong>
                        <p>Greenwich Mean Time - the mean solar time at the Royal Observatory in Greenwich, London.</p>
                    </div>
                    <div class="info-card">
                        <strong>ISO 8601</strong>
                        <p>International standard for representing dates and times in a consistent format.</p>
                    </div>
                </div>
            </div>
        </div>
            </div>
    </div>

    <!-- Right Sidebar -->
    <div class="sidebar">
        <div class="ad-container vertical">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-3527668902044321"
                 data-ad-slot="5345415384"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>
    </div>
</div>

<footer class="site-footer">
        <p>&copy; 2025 1Page Tools. <a href="../privacy-policy.html">Privacy Policy</a> | <a href="../terms-of-use.html">Terms of Use</a></p>
    </footer>

    <script>
        const timezones = [
            { id: 'UTC', name: 'UTC (Coordinated Universal Time)', city: 'UTC' },
            { id: 'America/New_York', name: 'New York (EST/EDT)', city: 'New York' },
            { id: 'America/Los_Angeles', name: 'Los Angeles (PST/PDT)', city: 'Los Angeles' },
            { id: 'America/Chicago', name: 'Chicago (CST/CDT)', city: 'Chicago' },
            { id: 'America/Denver', name: 'Denver (MST/MDT)', city: 'Denver' },
            { id: 'Europe/London', name: 'London (GMT/BST)', city: 'London' },
            { id: 'Europe/Paris', name: 'Paris (CET/CEST)', city: 'Paris' },
            { id: 'Europe/Berlin', name: 'Berlin (CET/CEST)', city: 'Berlin' },
            { id: 'Europe/Rome', name: 'Rome (CET/CEST)', city: 'Rome' },
            { id: 'Europe/Madrid', name: 'Madrid (CET/CEST)', city: 'Madrid' },
            { id: 'Asia/Tokyo', name: 'Tokyo (JST)', city: 'Tokyo' },
            { id: 'Asia/Shanghai', name: 'Shanghai (CST)', city: 'Shanghai' },
            { id: 'Asia/Kolkata', name: 'Mumbai/Delhi (IST)', city: 'Mumbai' },
            { id: 'Asia/Dubai', name: 'Dubai (GST)', city: 'Dubai' },
            { id: 'Asia/Singapore', name: 'Singapore (SGT)', city: 'Singapore' },
            { id: 'Australia/Sydney', name: 'Sydney (AEST/AEDT)', city: 'Sydney' },
            { id: 'Australia/Melbourne', name: 'Melbourne (AEST/AEDT)', city: 'Melbourne' },
            { id: 'Pacific/Auckland', name: 'Auckland (NZST/NZDT)', city: 'Auckland' }
        ];

        let allResults = '';

        function formatTimeInTimezone(date, timezone) {
            try {
                return new Intl.DateTimeFormat('en-US', {
                    timeZone: timezone,
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                }).format(date);
            } catch (error) {
                return 'Invalid timezone';
            }
        }

        function getTimezoneOffsetString(date, timezone) {
            try {
                const formatter = new Intl.DateTimeFormat('en-US', {
                    timeZone: timezone,
                    timeZoneName: 'short'
                });
                const parts = formatter.formatToParts(date);
                const tzName = parts.find(part => part.type === 'timeZoneName')?.value || '';
                
                // Calculate offset in hours
                const utcDate = new Date(date.toLocaleString('en-US', { timeZone: 'UTC' }));
                const tzDate = new Date(date.toLocaleString('en-US', { timeZone: timezone }));
                const offsetMs = tzDate - utcDate;
                const offsetHours = offsetMs / (1000 * 60 * 60);
                
                const hours = Math.floor(Math.abs(offsetHours));
                const minutes = Math.round((Math.abs(offsetHours) - hours) * 60);
                const sign = offsetHours >= 0 ? '+' : '-';
                
                if (minutes === 0) {
                    return `${sign}${hours}`;
                } else {
                    return `${sign}${hours}:${String(minutes).padStart(2, '0')}`;
                }
            } catch (error) {
                return '+0';
            }
        }

        function convertTimezones() {
            const dateInput = document.getElementById('dateInput').value;
            const fromTimezone = document.getElementById('fromTimezone').value;
            const resultsDiv = document.getElementById('timezoneResults');
            const copyBtn = document.getElementById('copyAllBtn');
            
            if (!dateInput) {
                resultsDiv.innerHTML = '<p>Select a date and time to see conversions</p>';
                copyBtn.disabled = true;
                return;
            }
            
            // Parse the datetime-local input
            // Format: "2024-03-15T14:30"
            const [datePart, timePart] = dateInput.split('T');
            const [year, month, day] = datePart.split('-').map(Number);
            const [hour, minute] = timePart.split(':').map(Number);
            
            // Create a date string that we can parse correctly for the source timezone
            // The trick: we create a string that looks like it's in the source timezone
            const dateString = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}T${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}:00`;
            
            // Method: Use toLocaleString to get what time it would be locally if this were the source timezone time
            // Then calculate the difference to get the UTC timestamp
            
            // Step 1: Create a test date to see the timezone offset
            const testDate = new Date(dateString);
            
            // Step 2: Format this date AS IF it were in the source timezone
            const sourceFormatter = new Intl.DateTimeFormat('en-US', {
                timeZone: fromTimezone,
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            
            // Step 3: Get the actual UTC time by using the source timezone interpretation
            // The input represents a time in the source timezone, so we need to convert it to UTC
            
            // Create the timestamp: interpret the input as being in the source timezone
            // We'll use a reference approach: what UTC time gives us the input time in the source timezone?
            
            let utcTime = null;
            
            // Binary search or iteration to find the UTC time that produces the source time
            // Simpler approach: use string manipulation
            const inputTimeInSourceTz = `${month}/${day}/${year}, ${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}:00`;
            
            // Find the UTC timestamp that when formatted in source timezone gives our input time
            // Start with a rough estimate
            let estimatedUTC = new Date(Date.UTC(year, month - 1, day, hour, minute, 0));
            
            // Adjust based on source timezone
            const sourceTimeStr = formatTimeInTimezone(estimatedUTC, fromTimezone);
            const sourceTimeParsed = new Date(sourceTimeStr);
            const diff = estimatedUTC - sourceTimeParsed;
            utcTime = new Date(estimatedUTC.getTime() - diff);
            
            let resultsHTML = '';
            let resultsText = '';
            
            timezones.forEach(tz => {
                const formattedTime = formatTimeInTimezone(utcTime, tz.id);
                const offsetStr = getTimezoneOffsetString(utcTime, tz.id);
                
                resultsHTML += `
                    <div class="timezone-result">
                        <div class="timezone-name">${tz.city}</div>
                        <div class="timezone-time">${formattedTime}</div>
                        <div class="timezone-offset">UTC${offsetStr}</div>
                    </div>
                `;
                
                resultsText += `${tz.city}: ${formattedTime} (UTC${offsetStr})\n`;
            });
            
            resultsDiv.innerHTML = resultsHTML;
            allResults = resultsText;
            copyBtn.disabled = false;
        }

        function useCurrentTime() {
            const now = new Date();
            const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
            document.getElementById('dateInput').value = localDateTime;
            convertTimezones();
        }

        function copyAllResults() {
            if (allResults) {
                navigator.clipboard.writeText(allResults).then(() => {
                    const btn = document.getElementById('copyAllBtn');
                    const originalText = btn.textContent;
                    btn.textContent = 'Copied!';
                    btn.style.background = '#28a745';
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.style.background = '';
                    }, 2000);
                });
            }
        }

        function updateWorldClock() {
            const now = new Date();
            const worldClockGrid = document.getElementById('worldClockGrid');
            
            let clockHTML = '';
            
            timezones.slice(0, 8).forEach(tz => { // Show first 8 timezones for world clock
                const formattedTime = formatTimeInTimezone(now, tz.id);
                const offsetStr = getTimezoneOffsetString(now, tz.id);
                
                clockHTML += `
                    <div class="world-clock-item">
                        <div class="clock-city">${tz.city}</div>
                        <div class="clock-time">${formattedTime}</div>
                        <div class="clock-offset">UTC${offsetStr}</div>
                    </div>
                `;
            });
            
            worldClockGrid.innerHTML = clockHTML;
        }

        // Initialize
        updateWorldClock();
        setInterval(updateWorldClock, 1000);
    </script>    <script>
        // Dark Mode Toggle Functionality
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update toggle button
            updateThemeToggle(newTheme);
        }

        function updateThemeToggle(theme) {
            const icon = document.querySelector('.theme-toggle-icon');
            const text = document.querySelector('.theme-toggle-text');
            
            if (theme === 'dark') {
                icon.textContent = 'light_mode';
                text.textContent = 'Light';
            } else {
                icon.textContent = 'dark_mode';
                text.textContent = 'Dark';
            }
        }

        // Initialize theme on page load
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            
            document.documentElement.setAttribute('data-theme', theme);
            updateThemeToggle(theme);
        }

        // Initialize theme when page loads
        document.addEventListener('DOMContentLoaded', initializeTheme);
    </script>


    <script>
        // Initialize AdSense ads and hide empty containers
        (adsbygoogle = window.adsbygoogle || []).push({});
        
        // Hide ad containers that don't have content after a delay
        function hideEmptyAds() {
            const adContainers = document.querySelectorAll('.ad-container');
            adContainers.forEach(function(container) {
                const adElement = container.querySelector('.adsbygoogle');
                // Check if ad element exists but has no content or is showing placeholder
                if (!adElement || 
                    adElement.offsetHeight === 0 || 
                    adElement.innerHTML.trim() === '' ||
                    adElement.querySelector('img[src*="placeholder"]') ||
                    adElement.querySelector('img[alt*="Ad"]')) {
                    container.style.display = 'none';
                    container.style.height = '0';
                    container.style.margin = '0';
                    container.style.padding = '0';
                }
            });
        }
        setTimeout(hideEmptyAds, 3000);
        setTimeout(hideEmptyAds, 5000);
        setTimeout(hideEmptyAds, 8000);
    </script>

</body>
</html>
