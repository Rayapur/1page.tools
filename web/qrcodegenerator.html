<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Security Headers are handled by Cloudflare Worker for HTTP headers -->
    <!-- Note: X-Frame-Options meta tag is not supported by browsers, must be HTTP header -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' https: http: 'unsafe-inline' 'unsafe-eval';">
    <title>QR Code Generator - 1Page Tools</title>
    <link rel="stylesheet" href="../css/theme.css">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js" 
            onerror="loadQRFallback()" 
            crossorigin="anonymous"
            onload="validateAndSetupQRCode()"
            defer></script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3527668902044321"
            crossorigin="anonymous"></script>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon-16x16.png">
    <link rel="manifest" href="../assets/images/site.webmanifest">
</head>
<body>
    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode">
        <i class="material-icons theme-toggle-icon">dark_mode</i>
        <span class="theme-toggle-text">Dark</span>
    </button>


    <a href="../index.html" class="back-button" title="Back to Home"></a>
    
    
    <div class="page-wrapper">
        <!-- Left Sidebar -->
        <div class="sidebar">
            <div class="ad-container vertical">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-3527668902044321"
                     data-ad-slot="1234567890"
                     data-ad-format="rectangle"
                     data-full-width-responsive="true"></ins>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="container">
            <div class="header-logo">
        <img src="../../assets/images/1page-logo.png" alt="1Page Tools Logo" class="site-logo">
    </div>
    <header>
            <h1>QR Code Generator</h1>
            <p class="subtitle">Generate QR codes for URLs, text, WiFi, contact info, and more</p>
        </header>
        
        <div class="instructions">
            <p>Create QR codes for various types of content. Customize size, colors, and error correction level.</p>
        </div>
        
        <div class="web-tools-container">
            <div class="input-section">
                <div class="input-header">
                    <label for="qrInput">Content to Encode:</label>
                    <div class="input-actions">
                        <button class="btn btn-secondary" onclick="clearInput()">Clear</button>
                        <button class="btn btn-secondary" onclick="loadSample()">Load Sample</button>
                    </div>
                </div>
                <textarea id="qrInput" placeholder="Enter text, URL, or other content to encode..." oninput="updateStats()"></textarea>
                <div class="input-stats" id="inputStats">
                    <span id="inputLength">Length: 0</span>
                    <span id="inputType">Type: Text</span>
                </div>
            </div>
            
            <div class="qr-options">
                <h3>QR Code Options</h3>
                <div class="options-grid">
                    <div class="option-group">
                        <label for="qrType">Content Type:</label>
                        <select id="qrType" onchange="updateQrType()">
                            <option value="text">Plain Text</option>
                            <option value="url">URL</option>
                            <option value="wifi">WiFi Network</option>
                            <option value="email">Email</option>
                            <option value="phone">Phone Number</option>
                            <option value="sms">SMS Message</option>
                            <option value="contact">Contact (vCard)</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label for="qrSize">Size:</label>
                        <select id="qrSize">
                            <option value="200">200x200</option>
                            <option value="300" selected>300x300</option>
                            <option value="400">400x400</option>
                            <option value="500">500x500</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label for="errorLevel">Error Correction:</label>
                        <select id="errorLevel">
                            <option value="L">L (Low - 7%)</option>
                            <option value="M" selected>M (Medium - 15%)</option>
                            <option value="Q">Q (Quartile - 25%)</option>
                            <option value="H">H (High - 30%)</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label for="foregroundColor">Foreground Color:</label>
                        <input type="color" id="foregroundColor" value="#000000">
                    </div>
                    
                    <div class="option-group">
                        <label for="backgroundColor">Background Color:</label>
                        <input type="color" id="backgroundColor" value="#ffffff">
                    </div>
                    
                    <div class="option-group">
                        <label for="margin">Margin:</label>
                        <select id="margin">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4" selected>4</option>
                        </select>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" onclick="generateQR()">Generate QR Code</button>
                    <button class="btn btn-secondary" onclick="downloadQR()" id="downloadBtn" disabled>Download PNG</button>
                    <button class="btn btn-secondary" onclick="downloadSVG()" id="downloadSvgBtn" disabled>Download SVG</button>
                </div>
            </div>
            
            <div class="qr-result" id="qrResult" style="display: none;">
                <h3>Generated QR Code</h3>
                <div class="qr-display">
                    <canvas id="qrCanvas"></canvas>
                    <div class="qr-info">
                        <div class="info-item">
                            <strong>Size:</strong>
                            <span id="qrSizeInfo">300x300</span>
                        </div>
                        <div class="info-item">
                            <strong>Error Correction:</strong>
                            <span id="qrErrorInfo">Medium (15%)</span>
                        </div>
                        <div class="info-item">
                            <strong>Data Capacity:</strong>
                            <span id="qrCapacityInfo">-</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="wifi-form" id="wifiForm" style="display: none;">
                <h3>WiFi Network Details</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="wifiSSID">Network Name (SSID):</label>
                        <input type="text" id="wifiSSID" placeholder="MyWiFiNetwork">
                    </div>
                    <div class="form-group">
                        <label for="wifiPassword">Password:</label>
                        <input type="password" id="wifiPassword" placeholder="password123">
                    </div>
                    <div class="form-group">
                        <label for="wifiSecurity">Security:</label>
                        <select id="wifiSecurity">
                            <option value="WPA">WPA/WPA2</option>
                            <option value="WEP">WEP</option>
                            <option value="nopass">No Password</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="wifiHidden">Hidden Network:</label>
                        <input type="checkbox" id="wifiHidden">
                    </div>
                </div>
            </div>
            
            <div class="contact-form" id="contactForm" style="display: none;">
                <h3>Contact Information</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="contactName">Name:</label>
                        <input type="text" id="contactName" placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label for="contactPhone">Phone:</label>
                        <input type="tel" id="contactPhone" placeholder="+1-555-123-4567">
                    </div>
                    <div class="form-group">
                        <label for="contactEmail">Email:</label>
                        <input type="email" id="contactEmail" placeholder="john@example.com">
                    </div>
                    <div class="form-group">
                        <label for="contactOrg">Organization:</label>
                        <input type="text" id="contactOrg" placeholder="Company Inc.">
                    </div>
                    <div class="form-group">
                        <label for="contactTitle">Title:</label>
                        <input type="text" id="contactTitle" placeholder="Software Engineer">
                    </div>
                    <div class="form-group">
                        <label for="contactWebsite">Website:</label>
                        <input type="url" id="contactWebsite" placeholder="https://example.com">
                    </div>
                </div>
            </div>
            
            <div class="web-info">
                <h3>QR Code Information</h3>
                <div class="info-grid">
                    <div class="info-card">
                        <strong>What are QR Codes?</strong>
                        <p>Quick Response codes are 2D barcodes that can store various types of data and be scanned by smartphones.</p>
                    </div>
                    <div class="info-card">
                        <strong>Error Correction</strong>
                        <p>Higher error correction allows the QR code to work even if partially damaged or obscured.</p>
                    </div>
                    <div class="info-card">
                        <strong>Size & Capacity</strong>
                        <p>Larger QR codes can store more data. Maximum capacity is about 4,296 characters.</p>
                    </div>
                    <div class="info-card">
                        <strong>Best Practices</strong>
                        <p>Use high contrast colors, adequate size for scanning distance, and test on different devices.</p>
                    </div>
                </div>
            </div>
        </div>
            </div>
    </div>

    <!-- Right Sidebar -->
    <div class="sidebar">
        <div class="ad-container vertical">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-3527668902044321"
                 data-ad-slot="1122334455"
                 data-ad-format="rectangle"
                 data-full-width-responsive="true"></ins>
        </div>
    </div>
</div>

<footer class="site-footer">
        <p>&copy; 2025 1Page Tools. <a href="../privacy-policy.html">Privacy Policy</a> | <a href="../terms-of-use.html">Terms of Use</a></p>
    </footer>

    <script>
        let currentQRData = '';

        function updateStats() {
            const input = document.getElementById('qrInput').value;
            const length = input.length;
            const isUrl = isValidUrl(input);
            
            document.getElementById('inputLength').textContent = `Length: ${length}`;
            document.getElementById('inputType').textContent = `Type: ${isUrl ? 'URL' : 'Text'}`;
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        function updateQrType() {
            const type = document.getElementById('qrType').value;
            const wifiForm = document.getElementById('wifiForm');
            const contactForm = document.getElementById('contactForm');
            
            wifiForm.style.display = type === 'wifi' ? 'block' : 'none';
            contactForm.style.display = type === 'contact' ? 'block' : 'none';
        }

        function generateQR() {
            // Check if QRCode library is loaded and has correct API
            if (!isQRCodeLibraryValid()) {
                alert('QR Code library not loaded or incorrect version. Please wait a moment or refresh the page.');
                loadQRFallback();
                return;
            }
            
            const type = document.getElementById('qrType').value;
            let data = '';
            
            switch (type) {
                case 'text':
                case 'url':
                    data = document.getElementById('qrInput').value;
                    break;
                case 'wifi':
                    data = generateWifiQR();
                    break;
                case 'email':
                    data = generateEmailQR();
                    break;
                case 'phone':
                    data = generatePhoneQR();
                    break;
                case 'sms':
                    data = generateSMSQR();
                    break;
                case 'contact':
                    data = generateContactQR();
                    break;
            }
            
            if (!data.trim()) {
                alert('Please enter content to encode');
                return;
            }
            
            currentQRData = data;
            
            const options = {
                width: parseInt(document.getElementById('qrSize').value),
                margin: parseInt(document.getElementById('margin').value),
                color: {
                    dark: document.getElementById('foregroundColor').value,
                    light: document.getElementById('backgroundColor').value
                },
                errorCorrectionLevel: document.getElementById('errorLevel').value
            };
            
            const canvas = document.getElementById('qrCanvas');
            
            if (!canvas) {
                alert('Canvas element not found');
                return;
            }
            
            try {
                // Clear any existing content and set up the canvas properly
                const ctx = canvas.getContext('2d');
                const size = parseInt(document.getElementById('qrSize').value);
                
                // Set the display size
                canvas.style.width = size + 'px';
                canvas.style.height = size + 'px';
                
                // Set the actual canvas size to ensure crisp rendering
                const dpr = window.devicePixelRatio || 1;
                canvas.width = size * dpr;
                canvas.height = size * dpr;
                ctx.scale(dpr, dpr);
                
                // Clear the canvas
                ctx.clearRect(0, 0, size, size);
                
                // Add the library check here since this is where it matters most
                if (typeof QRCode === 'undefined') {
                    alert('QR Code library not loaded. Please refresh the page and try again.');
                    loadQRFallback();
                    return;
                }
                
                QRCode.toCanvas(canvas, data, options, function (error) {
                    if (error) {
                        console.error('QR Code generation error:', error);
                        alert('Error generating QR code: ' + error.message);
                        return;
                    }
                    
                    document.getElementById('qrResult').style.display = 'block';
                    updateQRInfo();
                    
                    // Enable download buttons
                    document.getElementById('downloadBtn').disabled = false;
                    document.getElementById('downloadSvgBtn').disabled = false;
                    
                    // Scroll to result
                    document.getElementById('qrResult').scrollIntoView({ behavior: 'smooth' });
                });
            } catch (error) {
                console.error('QR Code generation error:', error);
                alert('Error generating QR code: ' + error.message);
            }
        }

        function generateWifiQR() {
            const ssid = document.getElementById('wifiSSID').value;
            const password = document.getElementById('wifiPassword').value;
            const security = document.getElementById('wifiSecurity').value;
            const hidden = document.getElementById('wifiHidden').checked;
            
            if (!ssid.trim()) {
                alert('Please enter WiFi network name');
                return '';
            }
            
            let wifiString = `WIFI:T:${security};S:${ssid};`;
            if (password) {
                wifiString += `P:${password};`;
            }
            if (hidden) {
                wifiString += 'H:true;';
            }
            wifiString += ';';
            
            return wifiString;
        }

        function generateEmailQR() {
            const input = document.getElementById('qrInput').value;
            if (!input.trim()) {
                alert('Please enter email address');
                return '';
            }
            return `mailto:${input}`;
        }

        function generatePhoneQR() {
            const input = document.getElementById('qrInput').value;
            if (!input.trim()) {
                alert('Please enter phone number');
                return '';
            }
            return `tel:${input}`;
        }

        function generateSMSQR() {
            const input = document.getElementById('qrInput').value;
            if (!input.trim()) {
                alert('Please enter phone number');
                return '';
            }
            return `sms:${input}`;
        }

        function generateContactQR() {
            const name = document.getElementById('contactName').value;
            const phone = document.getElementById('contactPhone').value;
            const email = document.getElementById('contactEmail').value;
            const org = document.getElementById('contactOrg').value;
            const title = document.getElementById('contactTitle').value;
            const website = document.getElementById('contactWebsite').value;
            
            if (!name.trim()) {
                alert('Please enter contact name');
                return '';
            }
            
            let vcard = 'BEGIN:VCARD\nVERSION:3.0\n';
            vcard += `FN:${name}\n`;
            if (phone) vcard += `TEL:${phone}\n`;
            if (email) vcard += `EMAIL:${email}\n`;
            if (org) vcard += `ORG:${org}\n`;
            if (title) vcard += `TITLE:${title}\n`;
            if (website) vcard += `URL:${website}\n`;
            vcard += 'END:VCARD';
            
            return vcard;
        }

        function updateQRInfo() {
            const size = document.getElementById('qrSize').value;
            const errorLevel = document.getElementById('errorLevel').value;
            const errorNames = { L: 'Low (7%)', M: 'Medium (15%)', Q: 'Quartile (25%)', H: 'High (30%)' };
            
            document.getElementById('qrSizeInfo').textContent = `${size}x${size}`;
            document.getElementById('qrErrorInfo').textContent = errorNames[errorLevel];
            
            // Calculate approximate data capacity
            const capacity = Math.floor((size * size) / 8);
            document.getElementById('qrCapacityInfo').textContent = `~${capacity} characters`;
        }

        function downloadQR() {
            const canvas = document.getElementById('qrCanvas');
            const link = document.createElement('a');
            link.download = 'qrcode.png';
            link.href = canvas.toDataURL();
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function downloadSVG() {
            if (!currentQRData.trim()) {
                alert('Please generate a QR code first');
                return;
            }
            
            const options = {
                width: parseInt(document.getElementById('qrSize').value),
                margin: parseInt(document.getElementById('margin').value),
                color: {
                    dark: document.getElementById('foregroundColor').value,
                    light: document.getElementById('backgroundColor').value
                },
                errorCorrectionLevel: document.getElementById('errorLevel').value
            };
            
            try {
                QRCode.toString(currentQRData, { ...options, type: 'svg' }, function (error, string) {
                    if (error) {
                        alert('Error generating SVG: ' + error.message);
                        return;
                    }
                    
                    const blob = new Blob([string], { type: 'image/svg+xml' });
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.download = 'qrcode.svg';
                    link.href = url;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                });
            } catch (error) {
                console.error('SVG generation error:', error);
                alert('Error generating SVG: ' + error.message);
            }
        }

        function clearInput() {
            document.getElementById('qrInput').value = '';
            document.getElementById('qrResult').style.display = 'none';
            document.getElementById('downloadBtn').disabled = true;
            document.getElementById('downloadSvgBtn').disabled = true;
            updateStats();
        }

        function loadSample() {
            const sampleText = 'https://1page.tools - Your one-stop destination for web tools!';
            document.getElementById('qrInput').value = sampleText;
            updateStats();
        }

        // Function to check if QRCode library is properly loaded and has the correct API
        function isQRCodeLibraryValid() {
            return typeof QRCode !== 'undefined' && 
                   typeof QRCode.toCanvas === 'function' && 
                   typeof QRCode.toString === 'function';
        }

        // Function to validate QRCode library when loaded
        function validateAndSetupQRCode() {
            if (isQRCodeLibraryValid()) {
                console.log('Primary QRCode library loaded successfully with correct API');
                hideLibraryError();
            } else {
                console.warn('QRCode library loaded but API incomplete or wrong library type');
                loadQRFallback();
            }
        }

        // Fallback function for loading QRCode library
        function loadQRFallback() {
            console.warn('QR Code library failed to load from primary CDN. Trying fallback...');
            const fallbacks = [
                'https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js',
                'https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js?bust=' + Date.now(),
                'https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js?t=' + Date.now(),
                'https://cdn.jsdelivr.net/npm/qrcode@1.4.4/build/qrcode.min.js',
                'https://unpkg.com/qrcode@1.4.4/build/qrcode.min.js'
            ];
            
            let fallbackIndex = 0;
            
            function tryNextFallback() {
                if (fallbackIndex >= fallbacks.length) {
                    console.error('All QR Code library CDNs failed to load');
                    showLibraryError();
                    return;
                }
                
                const script = document.createElement('script');
                script.src = fallbacks[fallbackIndex];
                script.crossOrigin = 'anonymous';
                
                // Set a timeout for Firefox compatibility
                const timeout = setTimeout(function() {
                    script.onload = script.onerror = null;
                    console.warn(`Fallback ${fallbackIndex + 1} timeout: ${fallbacks[fallbackIndex]}`);
                    fallbackIndex++;
                    tryNextFallback();
                }, 10000); // 10 second timeout
                
                script.onerror = function() {
                    clearTimeout(timeout);
                    console.warn(`Fallback ${fallbackIndex + 1} failed: ${fallbacks[fallbackIndex]}`);
                    fallbackIndex++;
                    tryNextFallback();
                };
                script.onload = function() {
                    clearTimeout(timeout);
                    console.log('QR Code library loaded from fallback CDN:', fallbacks[fallbackIndex]);
                    // Check if QRCode is available and has the correct API
                    setTimeout(function() {
                        if (isQRCodeLibraryValid()) {
                            console.log('Valid QR library loaded successfully');
                            hideLibraryError();
                        } else {
                            console.warn('Loaded library does not have required toCanvas method');
                            fallbackIndex++;
                            tryNextFallback();
                        }
                    }, 100);
                };
                document.head.appendChild(script);
            }
            
            tryNextFallback();
        }

        let libraryErrorDiv = null;
        
        function showLibraryError() {
            if (libraryErrorDiv) return; // Already showing error
            
            libraryErrorDiv = document.createElement('div');
            libraryErrorDiv.id = 'qr-library-error';
            libraryErrorDiv.innerHTML = `
                <div style="background: #ff4444; color: white; padding: 10px; margin: 10px; border-radius: 5px; text-align: center;">
                    <strong>Error:</strong> QR Code library could not be loaded. 
                    Please check your internet connection and refresh the page, or try a different browser.
                    <br><br>
                    <button onclick="retryLibraryLoad()" style="background: white; color: #ff4444; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; margin-right: 10px;">
                        Retry Loading
                    </button>
                    <button onclick="this.parentElement.parentElement.remove(); libraryErrorDiv = null;" style="background: #ffaaaa; color: #000; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">
                        Dismiss
                    </button>
                </div>
            `;
            document.body.insertBefore(libraryErrorDiv, document.querySelector('.container'));
        }
        
        function hideLibraryError() {
            if (libraryErrorDiv) {
                libraryErrorDiv.remove();
                libraryErrorDiv = null;
            }
        }
        
        function retryLibraryLoad() {
            console.log('User requested library reload retry');
            hideLibraryError();
            loadQRFallback();
        }

        function pageLoadCheck() {
            // Check if QRCode library is available after page loads with correct API
            if (!isQRCodeLibraryValid()) {
                console.warn('QR Code library not detected or incorrect API, will retry in 2 seconds...');
                setTimeout(function() {
                    if (!isQRCodeLibraryValid()) {
                        console.warn('QR Code library still not available or incomplete, trying fallbacks...');
                        loadQRFallback();
                    }
                }, 2000);
                
                // Also try checking periodically in case of slow loading
                let retryCount = 0;
                const checkInterval = setInterval(function() {
                    retryCount++;
                    if (isQRCodeLibraryValid()) {
                        console.log('QR Code library loaded successfully on retry', retryCount);
                        clearInterval(checkInterval);
                        hideLibraryError();
                    } else if (retryCount >= 10) { // Stop after 10 seconds
                        console.warn('QR Code library failed to load or incorrect API after 10 seconds, trying fallbacks');
                        clearInterval(checkInterval);
                        loadQRFallback();
                    }
                }, 1000);
            } else {
                console.log('QR Code library loaded successfully on first check with correct API');
                hideLibraryError();
            }
        }

        // Initialize
        updateQrType();
        pageLoadCheck();
    </script>    <script>
        // Dark Mode Toggle Functionality
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update toggle button
            updateThemeToggle(newTheme);
        }

        function updateThemeToggle(theme) {
            const icon = document.querySelector('.theme-toggle-icon');
            const text = document.querySelector('.theme-toggle-text');
            
            if (theme === 'dark') {
                icon.textContent = 'light_mode';
                text.textContent = 'Light';
            } else {
                icon.textContent = 'dark_mode';
                text.textContent = 'Dark';
            }
        }

        // Initialize theme on page load
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            
            document.documentElement.setAttribute('data-theme', theme);
            updateThemeToggle(theme);
        }

        // Initialize theme when page loads
        document.addEventListener('DOMContentLoaded', initializeTheme);
    </script>


    <script>
        // Initialize AdSense ads and hide empty containers
        (adsbygoogle = window.adsbygoogle || []).push({});
        
        // Hide ad containers that don't have content after a delay
        function hideEmptyAds() {
            const adContainers = document.querySelectorAll('.ad-container');
            adContainers.forEach(function(container) {
                const adElement = container.querySelector('.adsbygoogle');
                // Check if ad element exists but has no content or is showing placeholder
                if (!adElement || 
                    adElement.offsetHeight === 0 || 
                    adElement.innerHTML.trim() === '' ||
                    adElement.querySelector('img[src*="placeholder"]') ||
                    adElement.querySelector('img[alt*="Ad"]')) {
                    container.style.display = 'none';
                    container.style.height = '0';
                    container.style.margin = '0';
                    container.style.padding = '0';
                }
            });
        }
        setTimeout(hideEmptyAds, 3000);
        setTimeout(hideEmptyAds, 5000);
        setTimeout(hideEmptyAds, 8000);
    </script>

</body>
</html>
